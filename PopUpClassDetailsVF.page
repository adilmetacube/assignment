<apex:page standardController="Class__c" id="pg">
    <script src="/soap/ajax/20.0/connection.js" type="text/javascript"></script>
    <script>
        function insertStudent(){
         var Id = '{!$CurrentPage.parameters.Id}';
        console.log(Id);
            // Getting Session ID.
            sforce.connection.sessionId = "{!$Api.Session_ID}";
            //Creating New Student Record.
            var student = new sforce.SObject("student__c");
            //Getting Account Name from inputText.
            student.Last_Name__c = document.getElementById("pg:frm:pb:pbs:pbsi:txtName").value;
 			student.Class__c=Id;
            //Create method 
            var result = sforce.connection.create([student]);
 
            //Getting result 
            if (result[0].getBoolean("success")) {
                alert("New Student is created with id " + result[0].id);
            }
            else {
                alert("failed to create new Student " + result[0]);
            }
        window.close();
        }
    </script>
    <apex:form id="frm">
        <apex:pageBlock title="Insert Student" id="pb">
            <apex:pageBlockSection title="Student Name" columns="1" id="pbs">
                <apex:pageBlockSectionItem id="pbsi">
                    <apex:outputLabel value="Name" />
                    <apex:inputText title="Name" id="txtName" />
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection> 
            <apex:pageBlockButtons >
                <apex:commandButton onclick="insertStudent();" value="Save"/>
            </apex:pageBlockButtons>
        </apex:pageBlock>
    </apex:form>
</apex:page>
